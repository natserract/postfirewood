# What's your learn?

# References:
Docs [https://redwoodjs.com/docs](https://redwoodjs.com/docs)

## Issues has been solved
- node version, darwin is not compatible, so ignore the engine use `yarn install --ignore-engines"
- [https://community.redwoodjs.com/t/error-unknown-type-json-did-you-mean-json/817](https://community.redwoodjs.com/t/error-unknown-type-json-did-you-mean-json/817)
- window.addEventListener('storage', can't listened)

## Learn
### Day 1:
- [X] Setup Project
    - [X] Install psql
    - [X] Connect postgres DB
      - Migrations:
        Change provider in `schema.prisma`, sqlite -> postgresql

- [X] Redwood Commands
    - `yarn redwood dev`: start development
    - `yarn create redwood-app {app_name}`: create new project
    - `yarn rw prisma migrate dev`: migrate models
    - `yarn rw g page {page_name}`: generate page in client side
    - `yarn rw g sdl`: generate sdl file (scaffold)
    - See more on [commands](https://redwoodjs.com/docs/cli-commands)

- [X] Prisma Setup
  - Prisma is ORMs, schema prisma for **create modelling**
  - Run this command (for migrate your model in schema.prism)
    ```sh
    yarn rw prisma migrate dev
    ```
  - Rules about relation in Prisma:
    1. Harus punya field penghubung antar model, `fields` id model child, `references` id model parent
    2. `references` id harus unique
  - File structure:
    - `functions` will contain any lambda functions your app needs in addition to the graphql.js file auto-generated by Redwood. This file is required to use the GraphQL API.
    - `graphql` contains your GraphQL schema written in a Schema Definition Language (the files will end in .sdl.js)
    - See more on [file structure](https://learn.redwoodjs.com/docs/tutorial/redwood-file-structure/)
    - After create modelling, run `yarn rw g sdl {model_name}` for generate file `graphql/.sdl.ts` and `services/.`
  - `yarn rw g sdl account --crud` untuk mutation otomatis dibuat, kalo ada arg --crud. This is Cool!

- [X] Authentication
  - References: https://github.com/redwoodjs/playground-auth/tree/main/api/src/functions
  - Setup auth using firebase `yarn rw setup auth firebase`
  - Add in App.tsx AuthProvide `client={firebaseClient} type="firebase"`
  - Settings firebaseConfig
  - Validation: https://redwoodjs.com/docs/services

## Day 2
- [X] Authentication
    - Add authentication API action
    - Integrate authorization with context
    - Persist data in localStorage and sessionStorage
- [ ] Manage User
  - Docs: https://firebase.google.com/docs/auth/web/manage-users
  - Create Reusable components for graphql query
  - Private route https://redwoodjs.com/docs/router#sets-of-routes
  - Setting roles https://console.firebase.google.com/u/0/project/redwoodauth/settings/iam
  - Create signUp action
    - After signup user secara otomatis langsung signin
    - Add extra fields? from this article https://stackoverflow.com/questions/58547671/firebase-user-profile-add-custom-fields, using firebase DB (firestore), script:
      ```js
        this.auth.createUserWithEmailAndPassword(email, password)
          .then(registeredUser => {
            this.firestore.collection("usersCollection")
            .add({
              uid: registeredUser.user.uid,
              field: 'Info you want to get here',
              anotherField: 'Another Info...',
              ....
            })
        }
      ```
    - [ ] Forgot password

## Questions
- Apa Input types dan mutation ini perlu di tambahkan lagi? dan kalaupun secara otomatis di trigger darimana?
